<!--
    Primary page of the application. Displayed 24/7 in operation. 
    Designed to provide users with instant data coming from mobile application users. 
    Contents:
    - Map of UCSC + Costal Sciences Campus
        - Pop-up icons of unopened/unsolved/solved reports
    - List of tags showing color code
    - Pie Chart displaying average response times/completion times
    - Counter of unopened & counter of unsolved
    - [Standardized] Bottom border
    - [Standardized] Navagation bar - set to Dashboard
-->

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>CruzSafe: Home</title>
        <!--Imports Stylesheet-->
        <link href="./stylesheets/main.css" type="text/css" rel="stylesheet" />
        <link
            href="./stylesheets/homepage.css"
            type="text/css"
            rel="stylesheet"
        />
        <!--Imports External Icon Font Library-->
        <!--TODO: Install all needed Icons & remove external dependency-->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        />
    </head>
    <body>
        <script>
            // Sets up timer for repeated checks to the Database for latest reports
            //var tid = setInterval(getLatestReports, 3000);

            function getLatestReports() {
                var request = new XMLHttpRequest();
                request.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        console.log(request.response);
                    }
                };
                request.open(
                    "POST",
                    "https://cruzsafe.appspot.com/api/reports/latestReports"
                );
                request.send();
            }
        </script>
        <center>
            <!--Header-->
            <div class="topnav" id="topNav">
                <a class="active" href="./homepage.html"
                    ><i class="fa fa-home" aria-hidden="true"></i> Home</a
                >
                <a href="./reports.html"
                    ><i class="fa fa-folder" aria-hidden="true"></i> Reports</a
                >
                <a href="./analytics.html"
                    ><i class="fa fa-pie-chart" aria-hidden="true"></i>
                    Analytics</a
                >
                <a href="./admin.html">
                    <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                    Admin</a
                >
                <a href="./"
                    ><i class="fa fa-sign-out" aria-hidden="true"></i>
                    Sign-Out</a
                >
                <a
                    href="javascript:void(0);"
                    class="icon"
                    onclick="toggleTopNav()"
                >
                    <i class="fa fa-bars"></i>
                </a>
            </div>
            <!--Body-->
            <div class="row">
                <div id="column1" class="column">
                    <img
                        id="responseChart"
                        src="./assets/images/response_chart.png"
                        alt="mock resonse time chart"
                    />
                    <br />
                    <img
                        id="costalCampus"
                        src="./assets/images/UCSC_Costal_Campus.png"
                        alt="UCSC costal sciences campus map"
                    />
                </div>
                <div id="column2" class="column">
                    <img
                        id="mainCampus"
                        src="./assets/images/UCSC_Main_Campus.png"
                        alt="UCSC main campus map"
                    />
                </div>
                <div id="column3" class="column">
                    <h1>
                        ----Information such as tags will go here----
                    </h1>
                    <button onclick="displayReport(150)">SELECT REPORT</button
                    ><br /><br />
                    <button onclick="playaudio('testAudio1')">
                        TEST SOUND 1
                    </button>
                    <button onclick="playaudio('testAudio2')">
                        TEST SOUND 2</button
                    ><br />
                    <button onclick="playaudio('testAudio3')">
                        TEST SOUND 3
                    </button>
                    <button onclick="playaudio('testAudio4')">
                        TEST SOUND 4</button
                    ><br />
                    <button onclick="playaudio('testAudio5')">
                        TEST SOUND 5
                    </button>
                    <button onclick="playaudio('testAudio6')">
                        TEST SOUND 6</button
                    ><br />
                    <button onclick="playaudio('testAudio7')">
                        TEST SOUND 7
                    </button>
                    <script>
                        function playaudio(audioID) {
                            var audio = document.getElementById(audioID);
                            audio.play();
                        }
                    </script>
                    <audio
                        id="testAudio1"
                        src="./assets/sounds/Ball.wav"
                    ></audio>
                    <audio
                        id="testAudio2"
                        src="./assets/sounds/Chime.wav"
                    ></audio>
                    <audio
                        id="testAudio3"
                        src="./assets/sounds/Coins.wav"
                    ></audio>
                    <audio
                        id="testAudio4"
                        src="./assets/sounds/Crunch.wav"
                    ></audio>
                    <audio
                        id="testAudio5"
                        src="./assets/sounds/Maraca.wav"
                    ></audio>
                    <audio
                        id="testAudio6"
                        src="./assets/sounds/Shuffle.wav"
                    ></audio>
                    <audio
                        id="testAudio7"
                        src="./assets/sounds/Stapler.wav"
                    ></audio>
                    <h1>
                        ----Counter of unopened/unresolved reports here----
                    </h1>
                </div>
            </div>
            <!--Footer-->
            <!-- <div class="footer">
                <section>
                    <div>
                    <p style="text-align: center">
                        CruzSafe Made with <i id="heart" class="fa fa-heart-o"></i> by UCSC
                        team
                    </p>
                    </div>
                </section>
            </div> -->
            <script src="./libs/NavLib.js"></script>
        </center>

        <!--REPORT MODAL; USE WITH "report.js" METHODS!-->
        <center>
            <div id="report" class="modal">
                <form class="modal-content animate" method="POST">
                    <div class="imgcontainer">
                        <!--Close Button; closes Modal-->
                        <span
                            onclick="hideReport()"
                            class="close"
                            title="Close Modal"
                            ><i class="fa fa-times"></i
                        ></span>
                        <!--Report Content-->
                        <div id="reportContent" class="container">
                            <div class="reportRow">
                                <div id="column1" class="reportColumn1">
                                    <p>
                                        <b>Incident:</b> #<span
                                            id="incidentID"
                                        ></span>
                                        <b id="resolvedUnresolved"></b>
                                    </p>
                                    <p>
                                        <b>Date:</b> <span id="reportTS"></span>
                                    </p>
                                    <p>
                                        <b>Time:</b>
                                        <span id="reportTS2"></span>
                                    </p>
                                    <p>
                                        <b>Location:</b>
                                        <span id="location"></span>
                                        <span id="actualPinned"></span>
                                    </p>
                                    <p><b>Tag:</b> <span id="tag"></span></p>
                                    <br />
                                    <iframe id="reportMap"></iframe>
                                    <br />
                                    <img
                                        id="reportPhoto"
                                        src="./assets/images/report_photo_two.png"
                                        alt="report photo"
                                    />
                                </div>
                                <div id="column2" class="reportColumn2">
                                    <br />
                                    <p>
                                        <b>Name:</b>
                                        <span id="fullName"></span> - #<span
                                            id="mobileID"
                                        ></span>
                                    </p>
                                    <p>
                                        <b>Phone:</b> <span id="phone"></span>
                                    </p>
                                    <p>
                                        <b>Email:</b> <span id="email"></span>
                                    </p>
                                    <br />
                                    <b>Report Body:</b>
                                    <br /><br />
                                    <p id="body"></p>
                                    <br />
                                    <div id="responseButtons">
                                        <button id="reportRespond">
                                            Respond
                                        </button>
                                        <button id="reportOther">
                                            Other Options
                                        </button>
                                        <button id="reportResolve">
                                            Resolved
                                        </button>
                                        <br />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </center>
        <script src="./libs/report.js"></script>
        <script src="./libs/reportSingle.js"></script>
        <!--END REPORT MODAL-->
    </body>
</html>
